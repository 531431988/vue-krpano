!function(t){function e(e){for(var o,c,s=e[0],r=e[1],l=e[2],d=0,f=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);for(u&&u(e);f.length;)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var r=n[s];0!==a[r]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},a={app:0},i=[];function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/krpano/dist/";var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=r;i.push([0,"chunk-libs"]),n()}({0:function(t,e,n){t.exports=n("56d7")},"22bc":function(t,e,n){},"3ae7":function(t,e,n){},"3c8c":function(t,e,n){"use strict";var o=n("22bc");n.n(o).a},"4e46":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("0298"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf");var o=n("a59a"),a=(n("782f"),n("6d9d")),i=(n("a78e"),{title:"全景测试",primaryColor:"#52C41A",cookieExpires:1,api:"//192.168.7.12:8080/:8080/",storageOptions:{namespace:"ovit__",name:"ls",storage:"local"},hotspot:{balcony:{to:[{name:"parlour",ath:180,atv:40,title:"客厅"}]},parlour:{to:[{name:"balcony",ath:0,atv:30,title:"阳台"},{name:"bedroom1",ath:135,atv:30,title:"卧室1"}],look:[{ath:90,atv:20},{ath:160,atv:0}]},bedroom1:{to:[{name:"parlour",ath:-20,atv:40,title:"客厅"},{name:"bedroom2",ath:30,atv:40,title:"卧室2"},{name:"bedroom3",ath:90,atv:40,title:"卧室3"},{name:"toilet",ath:190,atv:40,title:"厕所"}],look:[{ath:245,atv:-20},{ath:155,atv:-20}]},bedroom2:{to:[{name:"bedroom1",ath:-150,atv:40,title:"卧室1"}],look:[{ath:180,atv:0}]},bedroom3:{to:[{name:"bedroom1",ath:90,atv:20,title:"卧室1"}],look:[{ath:180,atv:0},{ath:270,atv:0}]},toilet:{to:[{name:"bedroom1",ath:-70,atv:40,title:"卧室1"}],look:[{ath:130,atv:40},{ath:0,atv:0}]}}}),c={props:{xml:{type:String,required:!0},bgcolor:{type:String},scene:{type:String,default:"balcony"}},data:function(){return{krpano:null}},watch:{xml:function(t){this.krpano&&t&&(this.krpano.call("loadpano(".concat(t,",null,IGNOREKEEP)")),this.$emit("xmlChanged",t),this.log("xml changed: ".concat(t)))},scene:function(){this.loadScene()}},computed:{id:function(){return"krpano-".concat(this._uid)}},methods:{createPano:function(){var t,e,n=this;(t="./krpano/krpano.js",e="embedpano","function"==typeof window[e]?Promise.resolve():new Promise((function(e){var n=document.createElement("script");n.src=t,n.async=!0,n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(),n.onload=n.onreadystatechange=null)},document.getElementsByTagName("head")[0].appendChild(n)}))).then((function(){(0,window.embedpano)({swf:"./public/krpano/krpano.swf",xml:n.xml,target:n.id,id:"".concat(n.id,"-obj"),bgcolor:"#000000",html5:"prefer",basepath:"./",consolelog:!1,mwheel:!0,passQueryParameters:!0,onready:n.krpanoOnreadyCallback})}))},krpanoOnreadyCallback:function(t){this.krpano=t,this.log("创建成功"),this.$emit("init",this.krpano)},loadScene:function(){var t=this.krpano,e=this.scene;t&&(e?(t.call("loadscene(".concat(e,", null, MERGE, BLEND(1))")),t.call("lookat(-1, 0, 150)"),t.call("set(view.architectural, 1.0)"),t.call("wait(BLEND)"),t.call("tween(view.architectural, 0.0, 2.0)"),t.call("oninterrupt( tween(view.architectural, 0.0, 0.5))"),t.call("lookto(180, 0, 130, smooth(100, 100, 200))"),this.log("scene changed: ".concat(e)),this.$emit("change",t,e)):t.call("loadscene(get(scene[0].name),null,MERGE,BLEND(0.5))"))},log:function(t){this.debug&&this.krpano&&(t="[".concat(this.krpano.id,"]").concat(t))}},mounted:function(){this.createPano()},beforeDestroy:function(){var t=window.removepano;this.krpano&&(t(this.krpano.id),delete this.krpano)}},s=(n("6c9f"),n("2877")),r=Object(s.a)(c,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-krpano",attrs:{id:this.id}})}),[],!1,null,"580a9b8f",null).exports,l=n("f9d9"),u=n.n(l),d={props:["krpano"],components:{},data:function(){return{qrcode:u.a,showQrcode:!1,isAutoRotate:!1,isFullscreen:!1,isAutoPlay:!0}},methods:{onClick:function(t){var e=this,n=this.krpano;switch(t){case"auto":this.isAutoRotate=!this.isAutoRotate,n.call("switch(autorotate.enabled)");n.get("view.hlookat"),n.get("view.vlookat"),n.get("view.fov"),n.get("view.distortion");break;case"fullscreen":this.$fullscreen.toggle(document.querySelector("#app"),{wrap:!1,callback:function(t){e.isFullscreen=t}});break;case"music":this.isAutoPlay=!this.isAutoPlay,this.isAutoPlay?n.call("bgsnd_start"):n.call("bgsnd_stop")}}}},f=(n("722c"),Object(s.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar vui-flex vui-flex-dir-top vui-flex-wrap"},[n("van-icon",{attrs:{name:"qr"},on:{click:function(e){t.showQrcode=!0}}}),n("van-icon",{class:{active:t.isAutoPlay},attrs:{name:"music-o"},on:{click:function(e){return t.onClick("music")}}}),n("van-icon",{class:{active:t.isAutoRotate},attrs:{name:"replay"},on:{click:function(e){return t.onClick("auto")}}}),n("van-icon",{class:{active:t.isFullscreen},attrs:{name:"expand-o"},on:{click:function(e){return t.onClick("fullscreen")}}}),n("van-overlay",{attrs:{show:t.showQrcode},on:{click:function(e){t.showQrcode=!1}}},[n("div",{staticClass:"qrcode"},[n("van-image",{attrs:{width:"10rem",height:"10rem",fit:"cover",src:t.qrcode},on:{click:function(t){t.stopPropagation()}}})],1)])],1)}),[],!1,null,"6aafea16",null).exports),p=(n("826a"),n("e401")),h=n("7212"),v=(n("a7a3"),{components:{Swiper:h.Swiper,SwiperSlide:h.SwiperSlide},inject:["getContext"],data:function(){return{swiperOptions:{slidesPerView:window.innerWidth>1025?8:2,centeredSlides:!0,scrollbar:{el:".swiper-scrollbar",hide:!0}},list:[{src:"./krpano/panorama.tiles/balcony/thumb.jpg",title:"阳台",scene:"balcony"},{src:"./krpano/panorama.tiles/parlour/thumb.jpg",title:"客厅",scene:"parlour"},{src:"./krpano/panorama.tiles/bedroom1/thumb.jpg",title:"卧室1",scene:"bedroom1"},{src:"./krpano/panorama.tiles/bedroom2/thumb.jpg",title:"卧室2",scene:"bedroom2"},{src:"./krpano/panorama.tiles/bedroom3/thumb.jpg",title:"卧室3",scene:"bedroom3"},{src:"./krpano/panorama.tiles/toilet/thumb.jpg",title:"厕所",scene:"toilet"}]}},computed:{swiper:function(){return this.$refs.swiper.$swiper},context:function(){return this.getContext()}},methods:{handleClickSlide:function(t){this.swiper.slideTo(t,1e3,!1),this.$bus.$emit("on-pano-list-click",this.list[t],t)}},mounted:function(){var t=this.context.active;t&&this.swiper.slideTo(t,1e3,!1)}}),b=(n("eabb"),{components:{PanoList:Object(s.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("swiper",{ref:"swiper",staticClass:"pano-list",attrs:{options:t.swiperOptions},on:{"click-slide":t.handleClickSlide}},[t._l(t.list,(function(e,o){return n("swiper-slide",{key:o},[n("van-image",{attrs:{fit:"cover",src:e.src}}),n("p",{staticClass:"title"},[t._v(t._s(e.title))])],1)})),n("div",{staticClass:"swiper-scrollbar",attrs:{slot:"scrollbar"},slot:"scrollbar"})],2)}),[],!1,null,"325f793b",null).exports},data:function(){return{showBar:!0,overlay:!0,show:!1}},computed:{style:function(){return{background:"transparent",visibility:this.show?"initial":"hidden"}}},methods:{onChange:function(){this.show=!0,this.showBar=!1},onOverlayClick:function(){this.overlay=!0,this.show=!1,this.showBar=!0},onStar:function(){Object(p.a)("点赞")},onComment:function(){Object(p.a)("说一说")}}}),m=(n("3c8c"),{components:{Krpano:r,Sidebar:f,Nav:Object(s.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-bar"},[t.showBar?n("van-goods-action",[n("div",{staticClass:"tc",on:{click:t.onChange}},[n("van-icon",{attrs:{name:"wap-nav"}}),n("p",[t._v("切换场景")])],1),n("div",{staticClass:"vui-flex-item tr"},[n("div",{staticClass:"vui-flex vui-flex-right"},[n("div",{staticClass:"tc mr30",on:{click:t.onStar}},[n("van-icon",{attrs:{name:"good-job-o"}}),n("p",[t._v("5")])],1),n("div",{staticClass:"tc",on:{click:t.onComment}},[n("van-icon",{attrs:{name:"chat-o"}}),n("p",[t._v("说一说")])],1)])])]):t._e(),n("van-overlay",{attrs:{show:t.overlay,"custom-style":t.style},on:{click:t.onOverlayClick}}),n("transition",{attrs:{name:"fade"}},[t.show?n("PanoList"):t._e()],1)],1)}),[],!1,null,"673b1762",null).exports},mixins:[{methods:{addhotspot:function(t,e){var n=t.name,o=t.ath,a=t.atv,i=t.title,c=this.krpano;n+="hs".concat(Date.now()+Math.random()|0),c.call("addhotspot(".concat(n,")")),i?c.call("hotspot[".concat(n,"].loadstyle(hotspot_skin_to)")):c.call("hotspot[".concat(n,"].loadstyle(hotspot_skin_look)")),c.set("hotspot[".concat(n,"].ath"),o),c.set("hotspot[".concat(n,"].atv"),a),c.set("hotspot[".concat(n,"].scale"),.5),c.set("hotspot[".concat(n,"].tooltip"),i),c.get("device.html5")&&c.set("hotspot[".concat(n,"].onclick"),function(t){e&&e(c.get("xml.scene"),t)}.bind(null,n))}}}],data:function(){return{xml:"./krpano/scene/balcony.xml",scene:"balcony",krpano:null,active:0}},provide:function(){var t=this;return{getContext:function(){return{active:t.active}}}},methods:{onSceneChanged:function(t,e){this.active=Object.keys(i.hotspot).findIndex((function(t){return t===e})),this.createHotSpot()},onInitKrpano:function(t){var e=this;this.krpano=t,setTimeout((function(){e.createHotSpot()}),400)},createHotSpot:function(){var t=this,e=i.hotspot[this.scene],n=e.to,o=e.look,c=void 0===o?null:o;n.forEach((function(e){t.addhotspot(e,(function(n,o){t.scene=e.name}))})),c&&c.forEach((function(e){t.addhotspot(e,(function(t,e){Object(a.a)(["https://img.yzcdn.cn/1.jpg","https://img.yzcdn.cn/2.jpg"])}))}))}},mounted:function(){var t=this;this.$bus.$on("on-pano-list-click",(function(e,n){t.active=n,t.scene=e.scene,t.$refs.nav.showBar=!0}))}}),g=Object(s.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Krpano",{ref:"krpano",attrs:{xml:this.xml,scene:this.scene},on:{init:this.onInitKrpano,change:this.onSceneChanged}}),e("Nav",{ref:"nav"}),e("Sidebar",{attrs:{krpano:this.krpano}})],1)}),[],!1,null,"63259be3",null).exports,k=n("c16e"),y=n.n(k),w=(n("eebd"),n("c2cd")),A=n("bc3a"),x={vm:{},install:function(t,e){this.installed||(this.installed=!0,e&&(t.axios=e,Object.defineProperties(t.prototype,{axios:{get:function(){return e}},$http:{get:function(){return e}}})))}},S=n.n(A).a.create({baseURL:Object({NODE_ENV:"production",VUE_APP_BASE_API:"//192.168.7.12:8080/:8080/",VUE_APP_PUBLIC_PATH:"/krpano/dist",BASE_URL:"/krpano/dist/"}).VUE_APP_API_BASE_URL,timeout:6e3}),E=function(t){if(t.response){var e=t.response.data;403===t.response.status&&Object(w.a)({type:"danger",message:e.message})}return Promise.reject(t)};S.interceptors.request.use((function(t){var e=o.default.ls.get("token");return e&&(t.headers["Access-Token"]=e),t}),E),S.interceptors.response.use((function(t){return t.data}),E);var O={vm:{},install:function(t){t.use(x,S)}},C=new o.default,j=n("47ea"),P=n.n(j);var _=o.default.prototype.$isServer;_||Number(document.documentMode),!_&&document.addEventListener,!_&&document.removeEventListener;function B(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function L(t,e){if(t){for(var n=t.className,o=(e||"").split(" "),a=0,i=o.length;a<i;a++){var c=o[a];c&&(t.classList?t.classList.add(c):B(t,c)||(n+=" "+c))}t.classList||(t.className=n)}}var M={height:{inserted:function(t,e){e.value&&(t.style.height=e.value+(String(e.value).endsWith("%")?"":"px"))},unbind:function(t){t.style.height=null}},width:{inserted:function(t,e){e.value&&(t.style.width=e.value+(String(e.value).endsWith("%")?"":"px"))},unbind:function(t){t.style.width=null}},padding:{inserted:function(t,e){e.value&&(t.style.padding=e.value+(String(e.value).endsWith("%")?"":"px"))},unbind:function(t){t.style.padding=null}},margin:{inserted:function(t,e){e.value&&(t.style.margin=e.value+(String(e.value).endsWith("%")?"":"px"))},unbind:function(t){t.style.margin=null}},font:{inserted:function(t,e){e&&e.value&&(t.style.fontSize="".concat(e.value,"px"))},unbind:function(t){t.style.fontSize=null}},color:{inserted:function(t,e){var n=e.value||e.arg||e.expression;n.startsWith("#")?t.style.color=n:L(t,"".concat(n,"-color"))},unbind:function(t){t.style.color=null}},bgColor:{inserted:function(t,e){var n=e.value||e.arg;n.startsWith("#")?t.style.backgroundColor=n:L(t,"bg-".concat(n,"-color"))},unbind:function(t){t.style.backgroundColor=null}}},R=function(){Object.keys(M).forEach((function(t){o.default.directive(t,M[t])}))};o.default.use(O),o.default.use(y.a,i.storageOptions),o.default.use(P.a),o.default.prototype.$config=i,o.default.prototype.$bus=C,R(),window.document.title=i.title;n("c4cf");var I=n("b584"),N=(n("d2d0"),n("cc76")),U=(n("c309"),n("b196")),$=(n("be71"),n("1650")),J=(n("c239"),n("a837")),D=(n("963f"),n("ef55")),W=(n("9a0d"),n("d5ea")),Q=(n("deb9"),n("91e6")),K=(n("85ac"),n("0634")),T=(n("be74"),n("cc57"),{Button:K.a,Icon:Q.a,Image:W.a,Popup:D.a,Toast:p.a,Overlay:J.a,ActionSheet:$.a,GoodsAction:U.a,GoodsActionIcon:N.a,GoodsActionButton:I.a});Object.keys(T).forEach((function(t){o.default.component(T[t].name,T[t])}));n("9f35"),n("3ae7");o.default.config.productionTip=!1,new o.default({render:function(t){return t(g)}}).$mount("#app")},6842:function(t,e,n){},"6c9f":function(t,e,n){"use strict";var o=n("86e4");n.n(o).a},"722c":function(t,e,n){"use strict";var o=n("4e46");n.n(o).a},"86e4":function(t,e,n){},cc57:function(t,e,n){},eabb:function(t,e,n){"use strict";var o=n("6842");n.n(o).a},f9d9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEEAQMAAAD0xthJAAAABlBMVEX///8AAABVwtN+AAABxklEQVRo3u2ZPY6EMAyFPaJIyRE4So4GR8tROMKUKUZk/Z4DMwzsSlvbroL1VZb9/INI2Nma2Tqt4zPp4zVsj/Z2+yMYlbzKBE+VoW1wtgXuKYg7Ym6t5FWBJ5zDSxjTBW7nRKpJc0xD1oLQj7HVpAAsiL+IXnME6tD2HLtWpQ/iU7URsdeDOfaLrgfxYSBUtE21b80Dgbgsgpob0cUG7ftwirxrzhUheJceMc5BkCBoUOk1F8SZYPRK7jWmScaaY5JlKzlnBHMMCr3PQUqYkhf5yMIgdoI5RtneJyXdPTSm85It9bwRiFguGBxtDkLf72F8J5kfgh+ZXd3moMbddI9jEBcCM+LMjqaE9Jhivl5snvRHcInQ2IxWc2IahNbmkhAGZ2o6J4v0ObmLcgvihjhlU6I+2TYvu2r7IkxtCo9fNRnATWtBWw/ihuC72X0stZO5JLpNrDnag4P0/L2r+yCOIwXnZFy/MBfy+lXyKkFcieM+Jljntc8dMS3fFzQfhN1PQVSuWtsRxqOLBXFDmGpXu49Ry0u+XPE9Efph91ORft34/qflhLCas7+iuPYcJyA5a1AQZ9XGMlbtJ+DWncUjEfY/+wEB4fi6GKgY5AAAAABJRU5ErkJggg=="}});